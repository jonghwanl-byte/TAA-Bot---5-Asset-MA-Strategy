name: Daily MA Strategy Report

on:
  schedule:
    # ë§¤ì¼ 23:00 UTCì— ì‹¤í–‰ (í•œêµ­ ì‹œê°„ KST = UTC + 9, ì¦‰ ì˜¤ì „ 8ì‹œ)
    - cron: '0 23 * * *'
    
  workflow_dispatch:
    inputs:
      test_mode:
        description: 'Enable Test Mode (Bypasses weekend check, runs on latest data).'
        required: true
        default: 'FALSE'
        type: choice
        options:
          - 'TRUE'
          - 'FALSE'

jobs:
  run_daily_strategy:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¦ ì½”ë“œ ì²´í¬ì•„ì›ƒ
        uses: actions/checkout@v3

      - name: ğŸ Python í™˜ê²½ ì„¤ì •
        uses: actions/setup-python@v3
        with:
          python-version: '3.x'

      - name: âš™ï¸ ì¢…ì†ì„± ì„¤ì¹˜ (requirements.txt)
        run: pip install -r requirements.txt

      - name: ğŸš€ MA ì „ëµ ì‹¤í–‰ ë° í…”ë ˆê·¸ë¨ ë°œì†¡ (TEST MODE: ${{ github.event.inputs.test_mode }})
        env:
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          TEST_MODE: ${{ github.event.inputs.test_mode }}
        run: python daily_signal_generator.py
